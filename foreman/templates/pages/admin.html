<%inherit file="/base/base.html"/>
<%namespace file="/utils/sidebars.html" name="sidebars" />
<%namespace file="/utils/forms.html" name="forms" />
<%namespace file="/utils/format.html" name="format" />

<%def name="javascripts()" filter="trim">
    <link rel="StyleSheet" href="${urls.build('css', dict(file='jquery-ui-1.10.4.custom.css'))|h}" type="text/css" />
    <script src="${urls.build('javascript', dict(file='jquery-1.10.2.js'))|h}"></script>
    <script src="${urls.build('javascript', dict(file='jquery-ui-1.10.4.custom.min.js'))|h}"></script>
    <script>
        $(function() {
        $( "#tabs" ).tabs();
        $( "#tabs" ).tabs({ active: ${active_tab}});
        });
    </script>
</%def>



<div id="mainbar_noside">
    <h1>Foreman Administration</h1>

    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Options</a></li>
            <li><a href="#tabs-2">Task Types & Categories</a></li>
            <li><a href="#tabs-3">Evidence Types</a></li>
            <li><a href="#tabs-6">Case Types & Classifications</a></li>
            <li><a href="#tabs-4">Notes Export Formatting</a></li>
            <li><a href="#tabs-5">Validate Users</a></li>
        </ul>

        <div id="tabs-1" class="forensics_work_contents">

            <h2>Options</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='options'))|h}">
                ${forms.formTextField("Company Name", "company", "company", "form_label", "input_long", value=options.company, first=True)}
                ${forms.formTextField("Department Name", "department", "department", "form_label", "input_long", value=options.department)}
                ${forms.formTextField("Default folder location", "folder", "folder", "form_label", "input_long", value=options.default_location)}
                ${forms.formTextField("Date & time display", "datedisplay", "datedisplay", "form_label", "input_long", value=options.date_format)}
                <p style="clear:both;">For information on the date & time formatting, <a href="http://strftime.org/" target="_blank">please click here</a>.</p>
                <p style="clear:both; text-align:center"><input type="submit" value="Submit" /></p>

            </form>

        </div>

        <div id="tabs-2" class="forensics_work_contents">

            <div class="form_background">
            <h2>Move Task Type To Different Category</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='move_task_type'))|h}">
                ${forms.formSelectBox("Task Type", "task_type", "task_type", "form_label", "input_long", task_types, please_select=True, first=True)}
                ${forms.formSelectBox("New Task Category", "task_category", "task_Category", "form_label", "input_long", task_categories, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Move" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Add New Task Category</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='add_task_category'))|h}">
                 ${forms.formTextField("New Task Category", "task_category", "task_category", "form_label", "input_long", first=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Add" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Add New Task Type</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='add_task_type'))|h}">
                ${forms.formTextField("New Task Type", "task_type", "task_type", "form_label", "input_long", first=True)}
                ${forms.formSelectBox("Task Category", "task_category", "task_Category", "form_label", "input_long", task_categories, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Add" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Remove Task Category</h2>

            <p>Please note you can only remove Task Categories that are empty, please move all task types from the category into different categories first.</p>
            <form method="post" action="${urls.build('general.admin', dict(form='remove_task_category'))|h}">
                 ${forms.formSelectBox("Task Category", "task_category", "task_Category", "form_label", "input_long", empty_categories, please_select=True, first=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Remove" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Remove Task Type</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='remove_task_type'))|h}">
                 ${forms.formSelectBox("Task Type", "task_type", "task_type", "form_label", "input_long", task_types, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Remove" /></p>
            </form>
            </div>

        </div>

        <div id="tabs-3" class="forensics_work_contents">

            <h2>Current Evidence Types</h2>

            % for evi in evidence_types:
            <div class="evidence">
                <img alt="${evi|h} icon" src="${urls.build("images", dict(file='siteimages/evidence_icons/' + evi.replace(" ", "").lower() + '.png'))|h}" class="evidenceicon"/>
                ${evi|h}
            </div>
            % endfor

            <div style="clear:both"></div>

            <div class="form_background">
            <h2>Remove Evidence Type</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='remove_evidence_types'))|h}">
                 ${forms.formSelectBox("Evidence Type", "evi_type", "evi_type", "form_label", "input_long", evi_types, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Remove" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Add New Evidence Type</h2>

            <form method="post" action="${urls.build('general.admin', dict(form='add_evidence_types'))|h}">
                ${forms.formTextField("New Evidence Type", "evi_type", "evi_type", "form_label", "input_long", first=True)}
                ${forms.pickImageField("Pick an Icon", "icon", "icon", "form_label", "icon_input", icons)}
                <p style="clear:both; text-align:center"><input type="submit" value="Add" /></p>
            </form>
            </div>
        </div>

        <div id="tabs-6" class="forensics_work_contents">

            <h1>Case Types</h1>

            <div class="form_background">
            <h2>Remove Case Type</h2>
             <form method="post" action="${urls.build('general.admin', dict(form='remove_case_type', active_tab=6))|h}">
                 ${forms.formSelectBox("Case Types", "case_type", "case_type", "form_label", "input_long", case_types, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Remove" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Add New Case Type</h2>
            <form method="post" action="${urls.build('general.admin', dict(form='add_case_type', active_tab=6))|h}">
                ${forms.formTextField("New Case Type", "case_type", "case_type", "form_label", "input_long", first=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Add" /></p>
            </form>
            </div>

            <h1>Case Classifications</h1>

            <div class="form_background">
            <h2>Remove Case Classification</h2>
            <form method="post" action="${urls.build('general.admin', dict(form='remove_classification', active_tab=6))|h}">
                ${forms.formSelectBox("Case Classification", "classification", "classification", "form_label", "input_long", classifications, please_select=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Remove" /></p>
            </form>
            </div>

            <div class="form_background">
            <h2>Add New Case Classification</h2>
            <form method="post" action="${urls.build('general.admin', dict(form='add_classification', active_tab=6))|h}">
                ${forms.formTextField("New Classification", "classification", "classification", "form_label", "input_long", first=True)}
                <p style="clear:both; text-align:center"><input type="submit" value="Add" /></p>
            </form>
            </div>

        </div>


        <div id="tabs-4" class="forensics_work_contents">

            <h2>Notes Export Formatting</h2>

            <p>Unavailable.</p>


        </div>

        <div id="tabs-5" class="forensics_work_contents">

            <h2>Validate Users</h2>

            % if users:
            <table>
                <tr>
                    <th>Username</th> <th>Name</th> <th>Email address</th> <th>Validate</th>
                </tr>
                % for user in users:
                <tr>
                     <td><a href='${urls.build("user.view", dict(user_id=user.id))|h}'>${user.username|h}</a></td>
                     <td>${user.fullname|h}</td>
                     <td>${user.email|h}</td>
                     <td><a href='${urls.build("general.admin", dict(active_tab=4, validate_user=user.id))|h}'>Validate user</a></td>
                </tr>
                % endfor
            </table>
            % else:
                <p>There are no users that need validating.</p>
            % endif

        </div>

    </div>

</div>